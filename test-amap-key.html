<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é«˜å¾·åœ°å›¾PlaceSearchæµ‹è¯•</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }

    h1 {
      font-size: 24px;
      color: #333;
      margin-bottom: 20px;
      text-align: center;
    }

    .key-section {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
      border: 1px solid #e0e0e0;
    }

    .key-section label {
      display: block;
      font-size: 14px;
      color: #666;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .key-section input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    .key-section .hint {
      font-size: 12px;
      color: #999;
      margin-top: 8px;
      line-height: 1.5;
    }

    .search-section {
      margin-bottom: 20px;
    }

    .search-box {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    .search-box input {
      flex: 1;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    .search-box input:focus {
      outline: none;
      border-color: #1890ff;
      box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
    }

    .search-box button {
      padding: 12px 24px;
      background: #1890ff;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .search-box button:hover {
      background: #40a9ff;
    }

    .search-box button:active {
      background: #096dd9;
    }

    .search-box button:disabled {
      background: #d9d9d9;
      cursor: not-allowed;
    }

    .error-message {
      padding: 12px;
      background: #fff2f0;
      border: 1px solid #ffccc7;
      border-radius: 4px;
      color: #ff4d4f;
      font-size: 14px;
      margin-bottom: 15px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    .map-container {
      width: 100%;
      height: 500px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #1890ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .info-section {
      margin-top: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 6px;
      font-size: 13px;
      color: #666;
      line-height: 1.6;
    }

    .info-section h3 {
      font-size: 14px;
      color: #333;
      margin-bottom: 10px;
    }

    .info-section code {
      background: #e8e8e8;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ—ºï¸ é«˜å¾·åœ°å›¾PlaceSearchåŠŸèƒ½æµ‹è¯•</h1>

    <!-- ========== æ›¿æ¢Keyçš„ä½ç½® ========== -->
    <div class="key-section">
      <label for="amap-key">é«˜å¾·åœ°å›¾API Keyï¼š</label>
      <input 
        type="text" 
        id="amap-key" 
        placeholder="è¯·è¾“å…¥æ‚¨çš„é«˜å¾·åœ°å›¾API Keyï¼ˆWebç«¯JS APIï¼‰"
        value=""
      />
      <div class="hint">
        ğŸ’¡ æç¤ºï¼šè¯·åœ¨é«˜å¾·å¼€æ”¾å¹³å°ï¼ˆhttps://console.amap.com/ï¼‰ç”³è¯·Webç«¯JS APIçš„Keyï¼Œå¹¶ç¡®ä¿å·²å¼€é€š"POIæœç´¢"æƒé™ã€‚
        <br>
        âš ï¸ æ³¨æ„ï¼šKeyéœ€è¦é…ç½®åŸŸåç™½åå•ï¼Œæœ¬åœ°æµ‹è¯•æ—¶è¯·æ·»åŠ "localhost"æˆ–"127.0.0.1"ã€‚
      </div>
    </div>

    <!-- æœç´¢åŒºåŸŸ -->
    <div class="search-section">
      <div class="search-box">
        <input 
          type="text" 
          id="search-input" 
          placeholder="è¯·è¾“å…¥åœ°ç‚¹åç§°ï¼Œä¾‹å¦‚ï¼šå¹¿å·å¤§å‰§é™¢ã€ä¹å¤©ç™¾è´§ã€åŒ—äº¬å¤©å®‰é—¨"
        />
        <button id="search-btn" onclick="performSearch()">ğŸ” æœç´¢</button>
      </div>
      <div id="error-message" class="error-message"></div>
    </div>

    <!-- åœ°å›¾å®¹å™¨ -->
    <div id="map-container" class="map-container">
      <div id="loading" class="loading">
        <div class="loading-spinner"></div>
        <div>æ­£åœ¨åŠ è½½åœ°å›¾...</div>
      </div>
    </div>

    <!-- ä¿¡æ¯è¯´æ˜ -->
    <div class="info-section">
      <h3>ğŸ“‹ ä½¿ç”¨è¯´æ˜ï¼š</h3>
      <ol>
        <li>åœ¨ä¸Šæ–¹è¾“å…¥æ¡†ä¸­å¡«å…¥æ‚¨çš„é«˜å¾·åœ°å›¾API Key</li>
        <li>ç‚¹å‡»"æœç´¢"æŒ‰é’®æˆ–æŒ‰Enteré”®åˆå§‹åŒ–åœ°å›¾</li>
        <li>åœ¨åœ°ç‚¹æœç´¢æ¡†ä¸­è¾“å…¥å…³é”®è¯ï¼ˆå¦‚"å¹¿å·å¤§å‰§é™¢"ï¼‰</li>
        <li>ç‚¹å‡»"ğŸ” æœç´¢"æŒ‰é’®æ‰§è¡ŒPlaceSearchæœç´¢</li>
        <li>æŸ¥çœ‹æ§åˆ¶å°ï¼ˆF12ï¼‰è·å–è¯¦ç»†çš„æœç´¢ç»“æœå’Œé”™è¯¯ä¿¡æ¯</li>
      </ol>
      <p style="margin-top: 10px;">
        <strong>æµ‹è¯•å…³é”®è¯ç¤ºä¾‹ï¼š</strong>
        <code>å¹¿å·å¤§å‰§é™¢</code>ã€<code>ä¹å¤©ç™¾è´§</code>ã€<code>åŒ—äº¬å¤©å®‰é—¨</code>ã€<code>ä¸Šæµ·ä¸œæ–¹æ˜ç </code>
      </p>
    </div>
  </div>

  <script>
    // ========== å…¨å±€å˜é‡ ==========
    let map = null; // åœ°å›¾å®ä¾‹
    let marker = null; // æ ‡è®°å®ä¾‹
    let placeSearch = null; // PlaceSearchå®ä¾‹
    let amapKey = ''; // é«˜å¾·åœ°å›¾API Key

    // ========== åˆå§‹åŒ–å‡½æ•° ==========
    /**
     * åˆå§‹åŒ–é«˜å¾·åœ°å›¾
     * æ ¹æ®ç”¨æˆ·è¾“å…¥çš„KeyåŠ¨æ€åŠ è½½é«˜å¾·åœ°å›¾API
     */
    function initMap() {
      // è·å–ç”¨æˆ·è¾“å…¥çš„Key
      const keyInput = document.getElementById('amap-key');
      amapKey = keyInput.value.trim();

      // éªŒè¯Keyæ˜¯å¦è¾“å…¥
      if (!amapKey) {
        showError('è¯·å…ˆè¾“å…¥é«˜å¾·åœ°å›¾API Key');
        console.error('âŒ [initMap] API Keyæœªè¾“å…¥');
        return;
      }

      // æ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½è¿‡é«˜å¾·åœ°å›¾API
      if (window.AMap && window.AMap.Map) {
        console.log('âœ… [initMap] é«˜å¾·åœ°å›¾APIå·²åŠ è½½ï¼Œç›´æ¥åˆ›å»ºåœ°å›¾å®ä¾‹');
        createMapInstance();
        return;
      }

      // æ˜¾ç¤ºåŠ è½½æç¤º
      showLoading(true);

      // ========== æ›¿æ¢Keyçš„ä½ç½® ==========
      // åŠ¨æ€åŠ è½½é«˜å¾·åœ°å›¾APIï¼ˆ2.0ç‰ˆæœ¬ï¼‰
      const script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.defer = true;
      // æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„Keyæ›¿æ¢YOUR_AMAP_API_KEY
      script.src = `https://webapi.amap.com/maps?v=2.0&key=${amapKey}&callback=onAMapLoaded`;
      
      // é”™è¯¯å¤„ç†
      script.onerror = function() {
        showLoading(false);
        showError('é«˜å¾·åœ°å›¾APIåŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–Keyæ˜¯å¦æ­£ç¡®');
        console.error('âŒ [initMap] é«˜å¾·åœ°å›¾APIè„šæœ¬åŠ è½½å¤±è´¥');
      };

      // å°†è„šæœ¬æ·»åŠ åˆ°é¡µé¢
      document.head.appendChild(script);

      // è®¾ç½®å…¨å±€å›è°ƒå‡½æ•°ï¼ˆç”¨äºAPIåŠ è½½å®Œæˆåçš„å¤„ç†ï¼‰
      window.onAMapLoaded = function() {
        console.log('âœ… [initMap] é«˜å¾·åœ°å›¾APIåŠ è½½å®Œæˆ');
        showLoading(false);
        createMapInstance();
      };
    }

    /**
     * åˆ›å»ºåœ°å›¾å®ä¾‹
     */
    function createMapInstance() {
      try {
        // æ£€æŸ¥APIæ˜¯å¦åŠ è½½æˆåŠŸ
        if (!window.AMap || !window.AMap.Map) {
          throw new Error('é«˜å¾·åœ°å›¾APIæœªæ­£ç¡®åŠ è½½ï¼Œè¯·æ£€æŸ¥Keyæ˜¯å¦æœ‰æ•ˆ');
        }

        // é”€æ¯æ—§åœ°å›¾å®ä¾‹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
        if (map) {
          map.destroy();
          map = null;
        }

        // åˆ›å»ºåœ°å›¾å®ä¾‹ï¼Œé»˜è®¤ä¸­å¿ƒç‚¹ï¼šåŒ—äº¬å¤©å®‰é—¨
        map = new AMap.Map('map-container', {
          zoom: 13, // ç¼©æ”¾çº§åˆ«
          center: [116.397428, 39.90923], // åŒ—äº¬å¤©å®‰é—¨åæ ‡
          viewMode: '2D', // 2Dè§†å›¾
          resizeEnable: true // è‡ªåŠ¨é€‚åº”å®¹å™¨å°ºå¯¸å˜åŒ–
        });

        console.log('âœ… [createMapInstance] åœ°å›¾å®ä¾‹åˆ›å»ºæˆåŠŸ');
        console.log('ğŸ“ [createMapInstance] é»˜è®¤ä¸­å¿ƒç‚¹ï¼šåŒ—äº¬å¤©å®‰é—¨ [116.397428, 39.90923]');

        // åœ°å›¾åŠ è½½å®Œæˆäº‹ä»¶
        map.on('complete', function() {
          console.log('âœ… [createMapInstance] åœ°å›¾åŠ è½½å®Œæˆ');
          hideError();
        });

        // åœ°å›¾åŠ è½½é”™è¯¯äº‹ä»¶
        map.on('error', function(e) {
          console.error('âŒ [createMapInstance] åœ°å›¾åŠ è½½é”™è¯¯:', e);
          showError('åœ°å›¾åŠ è½½å¤±è´¥ï¼š' + (e.message || 'æœªçŸ¥é”™è¯¯'));
        });

        // åˆå§‹åŒ–PlaceSearchå®ä¾‹
        initPlaceSearch();

      } catch (error) {
        console.error('âŒ [createMapInstance] åˆ›å»ºåœ°å›¾å®ä¾‹å¤±è´¥:', error);
        showError('åˆ›å»ºåœ°å›¾å®ä¾‹å¤±è´¥ï¼š' + error.message);
        showLoading(false);
      }
    }

    /**
     * åˆå§‹åŒ–PlaceSearchå®ä¾‹
     */
    function initPlaceSearch() {
      try {
        // æ£€æŸ¥PlaceSearchæ’ä»¶æ˜¯å¦å¯ç”¨
        if (!window.AMap || !window.AMap.plugin) {
          throw new Error('é«˜å¾·åœ°å›¾APIæœªæ­£ç¡®åŠ è½½');
        }

        // åŠ è½½PlaceSearchæ’ä»¶
        AMap.plugin('AMap.PlaceSearch', function() {
          console.log('âœ… [initPlaceSearch] PlaceSearchæ’ä»¶åŠ è½½å®Œæˆ');

          // ========== æœç´¢é€»è¾‘æ ¸å¿ƒä»£ç  ==========
          // åˆ›å»ºPlaceSearchå®ä¾‹
          placeSearch = new AMap.PlaceSearch({
            pageSize: 1, // æ¯é¡µæ˜¾ç¤º1æ¡ç»“æœ
            pageIndex: 1, // å½“å‰é¡µç 
            city: 'å…¨å›½', // æœç´¢èŒƒå›´ï¼šå…¨å›½
            citylimit: true // é™åˆ¶åœ¨æŒ‡å®šåŸå¸‚å†…æœç´¢
          });

          console.log('âœ… [initPlaceSearch] PlaceSearchå®ä¾‹åˆ›å»ºæˆåŠŸ');
        });

      } catch (error) {
        console.error('âŒ [initPlaceSearch] åˆå§‹åŒ–PlaceSearchå¤±è´¥:', error);
        showError('åˆå§‹åŒ–æœç´¢åŠŸèƒ½å¤±è´¥ï¼š' + error.message);
      }
    }

    // ========== æœç´¢åŠŸèƒ½ ==========
    /**
     * æ‰§è¡ŒPlaceSearchæœç´¢
     */
    function performSearch() {
      // è·å–æœç´¢å…³é”®è¯
      const searchInput = document.getElementById('search-input');
      const keyword = searchInput.value.trim();

      // éªŒè¯å…³é”®è¯
      if (!keyword) {
        showError('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
        console.warn('âš ï¸ [performSearch] æœç´¢å…³é”®è¯ä¸ºç©º');
        return;
      }

      // æ£€æŸ¥åœ°å›¾å’ŒPlaceSearchæ˜¯å¦å·²åˆå§‹åŒ–
      if (!map) {
        showError('åœ°å›¾æœªåˆå§‹åŒ–ï¼Œè¯·å…ˆè¾“å…¥API Keyå¹¶ç‚¹å‡»"æœç´¢"æŒ‰é’®åˆå§‹åŒ–åœ°å›¾');
        console.warn('âš ï¸ [performSearch] åœ°å›¾æœªåˆå§‹åŒ–');
        return;
      }

      if (!placeSearch) {
        showError('æœç´¢åŠŸèƒ½æœªåˆå§‹åŒ–ï¼Œè¯·ç¨å€™å†è¯•');
        console.warn('âš ï¸ [performSearch] PlaceSearchæœªåˆå§‹åŒ–');
        return;
      }

      // éšè—ä¹‹å‰çš„é”™è¯¯æç¤º
      hideError();

      console.log('ğŸ” [performSearch] å¼€å§‹æœç´¢ï¼Œå…³é”®è¯:', keyword);

      // ========== æœç´¢é€»è¾‘æ ¸å¿ƒä»£ç  ==========
      // è°ƒç”¨PlaceSearchæœç´¢ï¼ˆä½¿ç”¨å¯¹è±¡æ ¼å¼ä¼ é€’å‚æ•°ï¼‰
      const searchParams = {
        keyword: keyword,
        city: 'å…¨å›½' // å¯ä»¥æŒ‡å®šåŸå¸‚ï¼Œå¦‚'å¹¿å·'ã€'åŒ—äº¬'ç­‰
      };

      console.log('ğŸ” [performSearch] æœç´¢å‚æ•°:', searchParams);

      placeSearch.search(searchParams, function(status, result) {
        // ========== æœç´¢ç»“æœå¤„ç† ==========
        console.log('ğŸ“Š [performSearch] æœç´¢å›è°ƒ - status:', status);
        console.log('ğŸ“Š [performSearch] æœç´¢å›è°ƒ - result:', result);

        if (status === 'complete' && result && result.poiList && result.poiList.pois && result.poiList.pois.length > 0) {
          // æœç´¢æˆåŠŸ
          const poi = result.poiList.pois[0]; // è·å–ç¬¬ä¸€ä¸ªç»“æœ
          const location = poi.location;

          if (!location) {
            showError('æœç´¢ç»“æœä¸­æ²¡æœ‰ä½ç½®ä¿¡æ¯');
            console.error('âŒ [performSearch] POIæ²¡æœ‰ä½ç½®ä¿¡æ¯');
            return;
          }

          const lng = location.lng;
          const lat = location.lat;

          console.log('âœ… [performSearch] æœç´¢æˆåŠŸï¼');
          console.log('ğŸ“ [performSearch] åœ°ç‚¹åç§°:', poi.name);
          console.log('ğŸ“ [performSearch] åœ°å€:', poi.address || 'æ— åœ°å€ä¿¡æ¯');
          console.log('ğŸ“ [performSearch] åæ ‡:', [lng, lat]);
          console.log('ğŸ“ [performSearch] å®Œæ•´POIä¿¡æ¯:', poi);

          // æ›´æ–°åœ°å›¾ä¸­å¿ƒç‚¹
          map.setCenter([lng, lat]);
          map.setZoom(15); // æ”¾å¤§åˆ°15çº§

          // æ¸…é™¤æ—§æ ‡è®°
          if (marker) {
            marker.setMap(null);
            marker = null;
          }

          // æ·»åŠ æ–°æ ‡è®°
          marker = new AMap.Marker({
            position: [lng, lat],
            map: map,
            title: poi.name
          });

          // æ˜¾ç¤ºä¿¡æ¯çª—å£ï¼ˆå¯é€‰ï¼‰
          const infoWindow = new AMap.InfoWindow({
            content: `
              <div style="padding: 10px;">
                <h3 style="margin: 0 0 8px 0; font-size: 16px;">${poi.name}</h3>
                <p style="margin: 0; color: #666; font-size: 14px;">${poi.address || 'æ— åœ°å€ä¿¡æ¯'}</p>
                <p style="margin: 4px 0 0 0; color: #999; font-size: 12px;">åæ ‡: ${lng.toFixed(6)}, ${lat.toFixed(6)}</p>
              </div>
            `,
            offset: new AMap.Pixel(0, -30)
          });

          infoWindow.open(map, [lng, lat]);

          hideError();

        } else {
          // æœç´¢å¤±è´¥
          let errorMsg = 'æœç´¢å¤±è´¥æˆ–æ— ç»“æœ';

          if (status === 'error') {
            errorMsg = 'æœç´¢è¯·æ±‚å¤±è´¥';
            console.error('âŒ [performSearch] æœç´¢è¯·æ±‚å¤±è´¥');
          } else if (status === 'no_data') {
            errorMsg = 'æœªæ‰¾åˆ°ç›¸å…³åœ°ç‚¹ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯';
            console.warn('âš ï¸ [performSearch] æœªæ‰¾åˆ°ç›¸å…³åœ°ç‚¹');
          } else if (status === 'complete' && (!result || !result.poiList || !result.poiList.pois || result.poiList.pois.length === 0)) {
            errorMsg = 'æœªæ‰¾åˆ°ç›¸å…³åœ°ç‚¹ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯';
            console.warn('âš ï¸ [performSearch] æœç´¢ç»“æœä¸ºç©º');
          }

          // æ‰“å°è¯¦ç»†é”™è¯¯ä¿¡æ¯
          console.error('âŒ [performSearch] æœç´¢å¤±è´¥è¯¦æƒ…:');
          console.error('   - status:', status);
          console.error('   - result:', result);
          console.error('   - å®Œæ•´å“åº”:', JSON.stringify({ status, result }, null, 2));

          // æ£€æŸ¥æ˜¯å¦æ˜¯Keyç›¸å…³é”™è¯¯
          if (result && result.info) {
            const info = result.info;
            if (info === 'INVALID_USER_KEY' || info === 'INSUFFICIENT_PRIVILEGES') {
              errorMsg = 'API Keyæ— æ•ˆæˆ–æƒé™ä¸è¶³ï¼Œè¯·æ£€æŸ¥Keyæ˜¯å¦æ­£ç¡®æˆ–æ˜¯å¦å¼€é€šäº†"POIæœç´¢"æƒé™';
              console.error('âŒ [performSearch] API Keyé”™è¯¯:', info);
            } else if (info === 'DAILY_QUERY_OVER_LIMIT') {
              errorMsg = 'APIè°ƒç”¨æ¬¡æ•°è¶…é™ï¼Œè¯·æ£€æŸ¥Keyçš„é…é¢';
              console.error('âŒ [performSearch] APIè°ƒç”¨æ¬¡æ•°è¶…é™');
            } else {
              errorMsg = 'æœç´¢å¤±è´¥ï¼š' + info;
            }
          }

          showError(errorMsg);
        }
      });
    }

    // ========== UIè¾…åŠ©å‡½æ•° ==========
    /**
     * æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
     */
    function showError(message) {
      const errorEl = document.getElementById('error-message');
      errorEl.textContent = message;
      errorEl.classList.add('show');
    }

    /**
     * éšè—é”™è¯¯ä¿¡æ¯
     */
    function hideError() {
      const errorEl = document.getElementById('error-message');
      errorEl.classList.remove('show');
    }

    /**
     * æ˜¾ç¤º/éšè—åŠ è½½æç¤º
     */
    function showLoading(show) {
      const loadingEl = document.getElementById('loading');
      loadingEl.style.display = show ? 'block' : 'none';
    }

    // ========== äº‹ä»¶ç»‘å®š ==========
    // é¡µé¢åŠ è½½å®Œæˆå
    window.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ“„ [DOMContentLoaded] é¡µé¢åŠ è½½å®Œæˆ');

      // æœç´¢è¾“å…¥æ¡†å›è½¦äº‹ä»¶
      const searchInput = document.getElementById('search-input');
      searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          performSearch();
        }
      });

      // Keyè¾“å…¥æ¡†å›è½¦äº‹ä»¶ï¼ˆåˆå§‹åŒ–åœ°å›¾ï¼‰
      const keyInput = document.getElementById('amap-key');
      keyInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          initMap();
        }
      });

      // å¦‚æœKeyè¾“å…¥æ¡†æœ‰å€¼ï¼Œè‡ªåŠ¨åˆå§‹åŒ–åœ°å›¾
      if (keyInput.value.trim()) {
        console.log('ğŸ’¡ [DOMContentLoaded] æ£€æµ‹åˆ°å·²è¾“å…¥Keyï¼Œ3ç§’åè‡ªåŠ¨åˆå§‹åŒ–åœ°å›¾...');
        setTimeout(function() {
          if (keyInput.value.trim()) {
            initMap();
          }
        }, 3000);
      }
    });
  </script>
</body>
</html>

